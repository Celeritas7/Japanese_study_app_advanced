-- New table for tracking test results & review dates
CREATE TABLE user_reviews (
  id SERIAL PRIMARY KEY,
  user_id TEXT NOT NULL,
  kanji TEXT NOT NULL,
  last_test_date DATE,
  last_result BOOLEAN,  -- true = correct, false = wrong
  next_review_date DATE,
  streak INTEGER DEFAULT 0,  -- consecutive correct answers
  UNIQUE(user_id, kanji)
);

-- Daily results log (kept for whole day reference)
CREATE TABLE daily_test_log (
  id SERIAL PRIMARY KEY,
  user_id TEXT NOT NULL,
  kanji TEXT NOT NULL,
  test_date DATE,
  test_type TEXT,  -- 'kanji', 'hiragana', 'meaning'
  result BOOLEAN,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**Suggestion:** Add a "Today's Mistakes" button to review all wrong answers from today.

---

## Feature 2: Similar Words Grouping (KANJIDIC2 + JMdict)

**Yes, it's possible!** Here's how:

### KANJIDIC2 provides:
- **Radicals** (éƒ¨é¦–) - e.g., æœˆ is radical for èƒƒ, è„¾, è†š
- **Components** - kanji breakdown
- **On'yomi / Kun'yomi** readings
- **Stroke count**

### JMdict provides:
- **Vocabulary readings**
- **Meanings** (can find synonyms)
- **Related words**

### Algorithm Approach:

| Group Type | Data Source | Method |
|------------|-------------|--------|
| **Same Radical** | KANJIDIC2 | Filter by `radical` field |
| **Similar Reading** | KANJIDIC2 + JMdict | Match `on'yomi` or `kun'yomi` |
| **Look-alike Kanji** | KANJIDIC2 | Find shared components |
| **Similar Meaning** | JMdict | Match meaning keywords |

### Example Output:
```
Group: æœˆ (ã«ãã¥ã - flesh radical)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èƒƒ (stomach)   â”‚ è„¾ (spleen)      â”‚
â”‚ è…¸ (intestine) â”‚ è‚ (liver)       â”‚
â”‚ è„³ (brain)     â”‚ è‚º (lung)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
All share: æœˆ radical = body parts
```

**Question:** Should I download and parse these XML files, or do you have them already?

---

## Feature 3: Story Section (Kanji Origin Stories)

I can see your database structure now - it's based on **Heisig's "Remembering the Kanji"** methodology!

### Your Structure:

| Column | Example (å…Œ group) |
|--------|-------------------|
| **Group Kanji** | å…Œ |
| **Member Kanji** | æ‚¦, è„±, ç¨, èª¬, é‹­, é–² |
| **Meaning** | devil |
| **Story** | "The two horns on the head of a teenager..." |
| **Frame Number** | [7], [18], [11], etc. |
| **On'yomi** | ãƒ€ãƒ„, ã‚¨ã‚¤, ã‚¨ãƒ„ (shared by group!) |

### Can KANJIDIC2 generate this?

| Aspect | KANJIDIC2 Can Do | Cannot Do |
|--------|------------------|-----------|
| Group by component | âœ… Yes | - |
| Find shared On'yomi | âœ… Yes | - |
| Meaning | âœ… Basic meaning | - |
| **Mnemonic Stories** | âŒ No | Need your database or AI |
| **Frame numbers** | âŒ No | Heisig-specific |

### My Suggestion:

**Hybrid Approach:**
1. **Your existing database** for stories you already have
2. **KANJIDIC2** to auto-generate groups for kanji WITHOUT stories
3. **Optional:** AI can generate simple stories for missing entries

### Story Display UI:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Group: å…Œ (devil)                    On: ãƒ€ãƒ„  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ­ The two horns on the head of a teenager    â”‚
â”‚     are enough to suggest a good image of a    â”‚
â”‚     devil. [7]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ‚¦ ecstasy      â”‚ State of mind...devil [18]  â”‚
â”‚  è„± undress      â”‚ To undress is to expose...  â”‚
â”‚  ç¨ tax          â”‚ Wheat...devil [12]          â”‚
â”‚  èª¬ opinion      â”‚ Rumour to devil's words [14]â”‚
â”‚  é‹­ pointed      â”‚ Metal...devil's weapons [15]â”‚
â”‚  é–² review       â”‚ Gates...devil [15]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜